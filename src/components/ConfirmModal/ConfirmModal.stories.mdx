import { Meta, Story, ArgsTable, Canvas } from "@storybook/addon-docs/blocks";
import ConfirmModal from "./ConfirmModal";
import Button from "../Button";
import DataTable from "../DataTable";
import { data } from "../DataTable/mockData";

<Meta
  title="Components/Utils/ConfirmModal"
  component={ConfirmModal}
  parameters={{ docs: { source: { type: "code" } } }}
  argTypes={{ onSubmit: { action: "submitted" } }}
/>

# ConfirmModal

<ArgsTable of={ConfirmModal} />

## Samples

### Basic

<Canvas>
  <Story
    name="basic"
    args={{
      isOpen: false,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            onClose={handleToggleButton}
            {...args}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### Full Size

<Canvas>
  <Story
    name="full size"
    args={{
      isOpen: false,
      fullSize: true,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            fullSize={true}
            onClose={handleToggleButton}
            {...args}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### With tips

<Canvas>
  <Story
    name="with tips"
    args={{
      isOpen: false,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            tipElement={<div>Description for this modal.</div>}
            onClose={handleToggleButton}
            {...args}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### With subactions

<Canvas>
  <Story
    name="with subactions"
    args={{
      isOpen: false,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            onClose={handleToggleButton}
            {...args}
            fullSize={true}
            subActions={[
              {
                title: "Download in CSV format",
                icon: "export",
                action: () => {},
              },
              {
                title: "Add to dashboard",
                icon: "export",
                action: () => {},
              },
            ]}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### Loading

<Canvas>
  <Story
    name="loading"
    args={{
      isOpen: false,
      loading: true,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            loading={true}
            onClose={handleToggleButton}
            {...args}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### Overflow Y scroll

<Canvas>
  <Story
    name="overflow Y scroll"
    args={{
      isOpen: false,
      overflowYScroll: true,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            overflowYScroll={true}
            onClose={handleToggleButton}
            {...args}
            isOpen={isOpen}
          >
            <DataTable
              data={data}
              columns={[
                {
                  name: "ID",
                  selector: (data) => data.id,
                },
                {
                  name: "name",
                  selector: (data) => data.date,
                },
              ]}
            />
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>

### Without footer

<Canvas>
  <Story
    name="without footer"
    args={{
      isOpen: false,
      onSubmit: undefined,
    }}
  >
    {(args) => {
      const [isOpen, setIsOpen] = React.useState(args.isOpen);
      const handleToggleButton = () => {
        setIsOpen(!isOpen);
      };
      return (
        <>
          <Button onClick={handleToggleButton}>Open Modal</Button>
          <ConfirmModal
            title="Title"
            onClose={handleToggleButton}
            onSubmit={undefined}
            {...args}
            isOpen={isOpen}
          >
            Content
          </ConfirmModal>
        </>
      );
    }}
  </Story>
</Canvas>
